Title: Macã‚’ä½¿ã£ã¦ã‚‹ã¨portã®5000ã¨7000ãŒAirPlayã«ä½¿ã‚ã‚Œã¦ãŸ
Date: 2022-05-18 02:00:00
Category: tech
Summary: Apple v.s. flask

## Cannot start service redis-cluster: Ports are not available: listen tcp 0.0.0.0:7000: bind: address already in use

ä»•äº‹ä¸­ã«ğŸ‘†ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã€‚

ã‚ã‚Œï¼Ÿä½•ã‹ãƒ­ãƒ¼ã‚«ãƒ«ã§ç«‹ã¡ä¸Šã’ã¦ãŸã£ã‘ï¼Ÿã¨æ€ã£ã¦portã‚’èª¿ã¹ãŸã‚‰

```{ .shell .code }
$sudo lsof -P -i:7000                                        2104ms î‚³ æ°´  5/18 17:44:32 2022
Password:
Sorry, try again.
Password:
COMMAND   PID          USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
ControlCe 454 kenta.yoshida   14u  IPv4 0x8224d2d97bdf1aed      0t0  TCP *:7000 (LISTEN)
ControlCe 454 kenta.yoshida   15u  IPv6 0x8224d2d97f238cd5      0t0  TCP *:7000 (LISTEN)
```

:thinking_face: ????

`ControlCe` ã£ã¦ãªã‚“ãï¼Ÿ

ã£ã¦ã‚°ã‚°ã£ãŸã‚‰ã“ã‚ŒãŒä¸€ç•ªä¸Šã«ã„ã¦

[Macã‚’Montereyã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã‚‰FlaskãŒ5000ç•ªãƒãƒ¼ãƒˆã§èµ·å‹•ã§ããªããªã£ãŸ - Sweet Escape](https://www.keisuke69.net/entry/2021/10/29/012608)

ã‚ã£â€¦ã¨ãªã£ãŸã€‚

ã‚“ã§ã€ã“ã‚Œ

[Why is Control Center on Monterey â€¦ | Apple Developer Forums](https://developer.apple.com/forums/thread/682332)

ã“ã®è¨˜äº‹ã«ã‚ˆã‚‹ã¨ airplayãŒ5000ã¨7000ä½¿ã£ã¦ã‚‹ã‚‰ã—ã„ã‘ã©ã€é¢ç™½ã„ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã£ãŸ

> The Remote Audio Output Protocol, AKA AirTunes, AKA AirPlay, has been using port 5000 since the year 2004. This is nothing new. All AirPlay receivers including AirPort Express and Apple TV use port 5000. If you've ever used Airfoil on your Mac (Airfoil Speakers was released in 2008), that also uses 5000 for the same reason. AirPlay receiving is new to macOS Monterey, but AirPlay itself is very old, predating Flask and these other web development environments. No, Apple is not trying to make web development difficult.

æ˜”(2004å¹´é ƒ)ã‹ã‚‰Macã®ãƒªãƒ¢ãƒ¼ãƒˆã‚ªãƒ¼ãƒ‡ã‚£ã‚ªé–¢é€£ã¯5000ç•ªã‚’ä½¿ã£ã¦ã„ãŸã‚‰ã—ããã®åæ®‹ã‚‰ã—ã„ã€‚flask(2010å¹´)ã®é–‹ç™ºå‰ã‹ã‚‰ä½¿ã£ã¦ã‚‹ã‹ã‚‰ã—ã‚ƒãƒ¼ãªã„ã£ã¦ã“ã¨ã‚‰ã—ã„ã€‚

wikipediaã§ã±ã£ã¨èª¿ã¹ãŸã‚‰5000ç•ªã‚’ä½¿ã£ã¦ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã¯ã¾ãã¾ãã‚ã‚‹ã‚‰ã—ãUPnPã‚„Herokuã®consoleã€Docker Registryç­‰ãŒä½¿ã£ã¦ã‚‹ã‚‰ã—ã„ã€‚å¤§äººæ°—ã‚„ã­ãƒ¼ã€‚

[List of TCP and UDP port numbers - Wikipedia](https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)

ã•ã‚‰ã«é¢ç™½ã„ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¤ã‘ãŸã€‚

> Funny thing just happened: I turned off AirPlay Receiver, started my service on port 5000, turned AirPlay Receiver back on, it is now happily listening on port 54842 in addition to port 7000 on which it was also listening before.

ä¸€å›AirPlayã‚’ã‚ªãƒ•ã«ã—ã¦ã€5000ç•ªã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç«‹ã¡ä¸Šã’ã€ãã®å¾ŒAirPlayã‚’å†åº¦ç«‹ã¡ä¸Šã’ã‚‹ã¨portãŒå¤‰ã‚ã£ã¦ãã‚Œã§ã‚‚å•é¡Œãªãä½¿ãˆã‚‹ã‚‰ã—ã„ã€‚

ãã‚Œã§ãˆãˆã‚“ã‹â€¦ï¼Ÿ

7000ã¯ãªã‚“ã§ã‚„ï¼Ÿã£ã¦èª¿ã¹ã¦ãŸã‘ã©ã‚ã‚“ã¾ã‚Šã±ã£ã¨èª¬æ˜ã•ã‚Œã¦ç„¡ã‹ã£ãŸã€‚

çµè«–ã¯AirPayã¯ä½¿ã£ãŸã“ã¨ä¸€åº¦ã‚‚ãªã„ã®ã§OFFã«ã—ã¦çµ‚ã‚ã£ãŸã€‚
