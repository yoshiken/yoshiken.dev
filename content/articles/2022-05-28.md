Title: GitHub Actions ã§ GitHub Container Registry ã«pushã—ãŸã¨ãã«403 ForbiddenãŒå‡ºãŸæ™‚ã®å¯¾å‡¦æ³•
Date: 2022-05-28 00:20:04
Category: tech
Summary: ã‚µã‚¤ãƒ¬ãƒ³ãƒˆã«æ¨©é™å¤‰æ›´ã™ãªãƒ¼ï¼

## GitHub Actionsã€€ã¨ã€€GitHub Container Registry ã®çµ„ã¿åˆã‚ã›ã£ã¦ã‚ã‚“ã¾ã‚Šç¾å‘³ã—ããªã„ã‹ã‚‚ã£ã¦æ€ã£ã¦ããŸã€‚

ã“ã®commit

[add ghcr lastest Â· yoshiken/yoshiken.dev.python@cd50ff6](https://github.com/yoshiken/yoshiken.dev.python/commit/cd50ff68d743f505c3a50e1f7b8cf6078394a5a9)

å…¬å¼é€šã‚Šã«å®Ÿè£…ã—ãŸã‚“ã ã‘ã©ã€ `Error: buildx failed with: error: failed to solve: unexpected status: 403 Forbidden` ã£ã¦èªè¨¼ãŒé€šã‚‰ãªã‹ã£ãŸã€‚

[add ghcr lastest Â· yoshiken/yoshiken.dev.python@cd50ff6](https://github.com/yoshiken/yoshiken.dev.python/runs/6625393773?check_suite_focus=true#step:6:222)


### è§£æ±ºç­–

[403 error on container registry push from GitHub Action - Code to Cloud / GitHub Packages - GitHub Community](https://github.community/t/403-error-on-container-registry-push-from-github-action/173071/39)

>I recently started to get this error too, but I found how to solve this.
>
>Basically, seems that GitHub sneakily removed write_packages from GITHUB_TOKEN, but you can add it again by going to your package page, then in â€œPackage settingsâ€ (the one in sidebar, not in the tab bar, as the later will redirect you to repository settings) and finally update the section named â€œManage Actions accessâ€ to add your repository with write access again:

æ„è¨³:
æœ€è¿‘ã«ãªã£ã¦å†ç¾ã—ã¾ã—ãŸã€‚

GithubãŒã‚µã‚¤ãƒ¬ãƒ³ãƒˆã«GITHUB_TOKENã‹ã‚‰write_packagesã®æ¨©é™å‰Šé™¤ã—ãŸã‚ˆã†ã§ã™ã€‚(ä»¥ä¸‹ğŸ‘‡ã®æ‰‹é †ã®èª¬æ˜


ã¨ã®ã“ã¨ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèªã—ã«è¡Œãã¨ `Maximum access by forked repos` ãŒreadã«ãªã£ã¦ã„ã‚‹ã€‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å´ã‹ã‚‰è¨±å¯ã—ãªã„ã¨ã ã‚ã£ã½ã„ã€‚

[Automatic token authentication - GitHub Docs](https://docs.github.com/en/actions/security-guides/automatic-token-authentication#permissions-for-the-github_token)

(æ—¥æœ¬èªã ã¨ãƒ†ãƒ¼ãƒ–ãƒ«å´©ã‚Œã¦ã‚‹ã‘ã©å…¬å¼ã ã¨ç¿»è¨³ã®Contributingå—ã‘ä»˜ã‘ã¦ãªã„ã£ã½ã„ã£ã½ã„ã‚“ã ã‚ˆã­ãƒ¼)

ã¨ã„ã†ã“ã¨ã§å…ˆç¨‹ã®æ‰‹é †ã‚’èª¬æ˜

packegeãƒšãƒ¼ã‚¸ã‹ã‚‰packege setting

<img src="https://i.imgur.com/otDnHDS.png" alt="">

Manage Actions access ã‹ã‚‰ Add Repository

<img src="https://i.imgur.com/tsrWL53.png" alt="">

GitHub Actionsã‚’å›ã—ã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ ã—ã¦writeã‚’é¸æŠã€‚(defaultã¯readã«ãªã£ã¦ã„ã‚‹ã®ã§æ³¨æ„

<img src="https://i.imgur.com/WwJgvsn.png" alt="">

ã“ã‚Œã§Githubä¸Šã§rerunã™ã‚‹ãªã‚Šempty commitã™ã‚‹ãªã‚Šã§GG

[GitHub Actions rerun Â· yoshiken/yoshiken.dev.python@55b7f16](https://github.com/yoshiken/yoshiken.dev.python/runs/6627715811?check_suite_focus=true)

<img src="https://i.imgur.com/DgLmZSW.png" alt="">
